{% block head %}
{% include "base/head.html" %}
{% endblock %}

{% load static %}

<title>مقایسه | فروشگاه موبایل</title>
</head>
<body>

    
    {% block header %}
    {% include "base/header.html" %}
    {% endblock %}

    <div class="container">
        <div class="whole-card add-compare-item-section text-right">
            <div class="row mb-5">
                <div class="col-12">
                    <h4>
                        مقایسه
                    </h4>
                </div>
            </div>
            <div class="form-row align-items-end justify-content-between mb-5">
                <div class="col-lg-3 col-sm-4 col-12 brand-select-row">
                    <label for="brand-select">
                        انتخاب برند:
                    </label>
                    <select class="form-control" name="brand-select" id="brand-select">
                        <option value="0">برند موبایل را انتخاب کنید...</option>
                        {% for brand in brands %}
                            <option value="{{ forloop.counter }}">{{brand}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-lg-7 col-sm-8 col-12 mobile-select-row">
                    <label for="mobile-select">
                        انتخاب موبایل:
                    </label>
                    <select class="form-control" name="mobile-select" id="mobile-select">
                        <option value="0">موبایل را انتخاب کنید...</option>
                    </select>
                </div>
                <div class="col-lg-2 col-12 justify-content-end add-compare-item-row">
                    <button id="add-compare-item-btn" class="btn btn-primary add-compare-item w-100">
                        افزودن
                        <i class="far fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="row text-center mb-5 selected-items">
                <div class="col-6 deactive">
                    <div class="row">
                        <div class="col-12">
                            <div class="compare-item-image">
                                <img src="{% static "images/samsung-galaxy-note20-256gb.jpg" %}" alt="عکس محصول">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 deactive">
                    <div class="row">
                        <div class="col-12">
                            <div class="compare-item-image">
                                <img src="{% static "images/samsung-galaxy-note20-256gb.jpg" %}" alt="عکس محصول">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 text-left">
                    <button disabled id="do-compare" class="btn btn-primary">
                        انجام مقایسه
                        <i class="fal fa-angle-left"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="whole-card compare-items-card">
            <div class="back-to-add-to-compare-item-section text-right">
                <h4>
                    <a href="{% url 'market:compare' %}">
                        <i class="fas fa-long-arrow-right"></i>
                    </a>
                    برگشت
                </h4>
            </div>
            <table id="compare-content" class="table compare-table w-100 mt-5">
                <tr>
                    <td>عکس محصول</td>
                    <td><img src="{% static "images/product-1.jpg" %}" alt="عکس محصول"></td>
                    <td><img src="{% static "images/product-2.jpg" %}" alt="عکس محصول"></td>
                </tr>
                <tr>
                    <th>نام</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        گوشی موبایل سامسونگ مدل Galaxy Z Fold 2 5G دو سیم کارت ظرفیت 12/256 گیگابایت
                    </td>
                    <td>
                        گوشی موبایل اپل مدل iPhone 12 Pro Max دوسیم کارت ظرفیت 6/256 گیگابایت
                    </td>
                </tr>
                <tr>
                    <th>تاریخ معرفی</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>تاریخ شمسی</td>
                    <td>شهریور 1399</td>
                    <td>آبان 1399</td>
                </tr>
                <tr>
                    <td>تاریخ میلادی</td>
                    <td>September 2020</td>
                    <td>2020 November</td>
                </tr>
                <tr>
                    <th>طراحی</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>وزن</td>
                    <td>279 گرم</td>
                    <td>228 گرم</td>
                </tr>
                <tr>
                    <td>ضخامت</td>
                    <td>تا شده : 16.8 میلی متر<br>
                        تا نشده : 6.9 میلی متر</td>
                    <td>7.4 میلی متر</td>
                </tr>
                <tr>
                    <td>طول و عرض</td>
                    <td>تا شده : 159.2×68 میلی متر<br>
                        تا نشده : 159.2×128.2 میلی متر</td>
                    <td>160.8x78.1 میلی متر</td>
                </tr>
                <tr>
                    <td>تعداد سیمکارت</td>
                    <td>دو سیم کارت</td>
                    <td>دو سیم کارت</td>
                </tr>
                <tr>
                    <th>پردازنده</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>تراشه</td>
                    <td>Qualcomm SM8250 Snapdragon 865+ (7 nm+)</td>
                    <td>Apple A14 Bionic</td>
                </tr>
                <tr>
                    <td>پردازنده مرکزی</td>
                    <td>هشت هسته ای</td>
                    <td>شش هسته ای</td>
                </tr>
                <tr>
                    <td>پردازنده گرافیکی</td>
                    <td>Adreno 650</td>
                    <td>Apple GPU</td>
                </tr>
                <tr>
                    <td>فرکانس پردازنده مرکزی</td>
                    <td>1x3.09 GHz Kryo 585 & 3x2.42 GHz Kryo 585 & 4x1.8 GHz Kryo 585</td>
                    <td>2x3.1 GHz Firestorm + 4x1.8 GHz Icestorm</td>
                </tr>
                <tr>
                    <th>حافظه</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>مقدار RAM</td>
                    <td>12 گیگابایت</td>
                    <td>6 گیگابایت</td>
                </tr>
                <tr>
                    <td>حافظه داخلی</td>
                    <td>256 گیگابایت</td>
                    <td>256 گیگابایت</td>
                </tr>
                <tr>
                    <th>صفحه نمایش</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>صفحه نمایش رنگی</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>صفحه نمایش لمسی</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>نوع صفحه نمایش</td>
                    <td>Foldable Dynamic AMOLED 2X</td>
                    <td>Super Retina XDR OLED</td>
                </tr>
                <tr>
                    <td>اندازه صفحه نمایش</td>
                    <td>7.6 اینچ</td>
                    <td>6.7 اینچ</td>
                </tr>
                <tr>
                    <td>رزولوشن صفحه نمایش</td>
                    <td>1768×2208 پیکسل</td>
                    <td>1284x2778 پیکسل</td>
                </tr>
                <tr>
                    <td>تراکم پیکسلی</td>
                    <td>372~</td>
                    <td>458~</td>
                </tr>
                <tr>
                    <td>تعداد رنگ</td>
                    <td>16 میلیون رنگ</td>
                    <td>16 میلیون رنگ</td>
                </tr>
                <tr>
                    <th>مخابرات و ارتباطات</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>نوع سیم کارت</td>
                    <td>سایز نانو (8.8 × 12.3 میلی‌متر)</td>
                    <td>سایز نانو (8.8 × 12.3 میلی‌متر)</td>
                </tr>
                <tr>
                    <td>شبکه های ارتباطی</td>
                    <td>5G -4G -3G -2G</td>
                    <td>5G -4G -3G -2G</td>
                </tr>
                <tr>
                    <td>شبکه 2G</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>مشخصات شبکه 2G</td>
                    <td>GSM 850 / 900 / 1800 / 1900</td>
                    <td>GSM 850 / 900 / 1800 / 1900 - SIM 1 & SIM 2 (dual-SIM) - for China<br>CDMA 800 / 1900</td>
                </tr>
                <tr>
                    <td>شبکه 3G</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>مشخصات شبکه 3G</td>
                    <td>HSDPA 850 / 900 / 1700(AWS) / 1900 / 2100</td>
                    <td>HSDPA 850 / 900 / 1700(AWS) / 1900 / 2100<br>CDMA2000 1xEV-DO</td>
                </tr>
                <tr>
                    <td>شبکه 4G</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>مشخصات شبکه 4G</td>
                    <td>LTE</td>
                    <td>1, 2, 3, 4, 5, 7, 8, 12, 13, 14, 17, 18, 19, 20, 25, 26, 28, 29, 30, 32, 34, 38, 39, 40, 41, 42, 46, 48, 66, 71 - A2342</td>
                </tr>
                <tr>
                    <td>شبکه 5G</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>مشخصات شبکه 5G</td>
                    <td>SA/NSA/Sub6/mmWave</td>
                    <td>1, 2, 3, 5, 7, 8, 12, 20, 25, 28, 38, 40, 41, 66, 71, 77, 78, 79, 260, 261 Sub6/mmWave - A2342</td>
                </tr>
                <tr>
                    <td>فناوری‌ های ارتباطی</td>
                    <td>Wi-Fi<br>Bluetooth<br>GPS<br>NFC</td>
                    <td>Wi-Fi<br>Bluetooth<br>GPS<br>NFC</td>
                </tr>
                <tr>
                    <td>اتصال به شبکه بی سیم ( Wi-Fi )</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>بلوتوث</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>نوع بلوتوث</td>
                    <td>نسخه 5.1</td>
                    <td>نسخه 5.0</td>
                </tr>
                <tr>
                    <td>فناوری مکان‌یابی ( GPS )</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>اتصال از طریق NFC</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>درگاه اتصال کابلی</td>
                    <td>USB Type C</td>
                    <td>USB 2.0</td>
                </tr>
                <tr>
                    <th>دوربین</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>دوربین</td>
                    <td>سه گانه</td>
                    <td>چهارگانه</td>
                </tr>
                <tr>
                    <td>رزولوشن عکس دوربین اول</td>
                    <td>12 مگاپیکسل</td>
                    <td>12 مگاپیکسل</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین اول</td>
                    <td>از نوع wide<br>دریچه دیافراگم f/1.8<br>سایز سنسور 1/1.76 اینچ<br>فاصله کانونی لنز 26 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.8 میکرومتر<br>فوکوس دوبرابری اتوماتیک PDAF<br>لرزشگیر OIS</td>
                    <td>از نوع wide<br>دریچه دیافراگم f/1.6<br>فاصله کانونی لنز 26 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.7 میکرومتر<br>فوکوس دوبرابری اتوماتیک PDAF<br>لرزشگیر sensor-shift OIS</td>
                </tr>
                <tr>
                    <td>رزولوشن عکس دوربین دوم</td>
                    <td>12 مگاپیکسل</td>
                    <td>12 مگاپیکسل</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین دوم</td>
                    <td>از نوع telephoto<br>دریچه دیافراگم f/2.4<br>سایز سنسور 1/3.6 اینچ<br>فاصله کانونی لنز 52 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.0 میکرومتر<br>لیزر AF<br>لرزشگیر OIS<br>زوم اپتیکال 2x</td>
                    <td>از نوع telephoto<br>دریچه دیافراگم f/2.2<br>سایز سنسور 1/3.4 اینچ<br>فاصله کانونی لنز 65 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.0 میکرومتر<br>لرزشگیر OIS<br>زوم اپتیکال 2x<br>فوکوس اتوماتیک PDAF</td>
                </tr>
                <tr>
                    <td>رزولوشن عکس دوربین سوم</td>
                    <td>12 مگاپیکسل</td>
                    <td>12 مگاپیکسل</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین سوم</td>
                    <td>از نوع ultrawide<br>دریچه دیافراگم f/2.2<br>سایز سنسور 1/3.1 اینچ<br>فاصله کانونی لنز 26 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.0 میکرومتر</td>
                    <td>از نوع ultrawide<br>دریچه دیافراگم f/2.4<br>سایز سنسور 1/3.6 اینچ<br>فاصله کانونی لنز 13 میلی متر</td>
                </tr>
                <tr>
                    <td>رزولوشن عکس دوربین چهارم</td>
                    <td>------</td>
                    <td>TOF 3D LiDAR scanner</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین چهارم</td>
                    <td>------</td>
                    <td>از نوع depth</td>
                </tr>
                <tr>
                    <td>فلش</td>
                    <td>LED</td>
                    <td>Dual-LED dual-tone</td>
                </tr>
                <tr>
                    <td>دوربین سلفی</td>
                    <td>10 مگاپیکسل</td>
                    <td>12 مگاپیکسل</td>
                </tr>
                <tr>
                    <td>دوربین سلفی دوم</td>
                    <td>10 مگاپیکسل (دوربین کاور)</td>
                    <td>SL 3D</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین سلفی</td>
                    <td>از نوع wide<br>دریچه دیافراگم f/2.2<br>سایز سنسور 1/3 اینچ<br>فاصله کانونی لنز 26 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.22 میکرومتر</td>
                    <td>از نوع wide<br>دریچه دیافراگم f/2.2<br>سایز سنسور 1/3.6 اینچ<br>فاصله کانونی لنز 23 میلی متر</td>
                </tr>
                <tr>
                    <td>مشخصات دوربین سلفی دوم</td>
                    <td>از نوع wide<br>دریچه دیافراگم f/2.2<br>سایز سنسور 1/3 اینچ<br>فاصله کانونی لنز 26 میلی متر<br>ثبت تصاویر با پیکسل هایی به سایز 1.22 میکرومتر</td>
                    <td>از نوع depth/biometrics sensor</td>
                </tr>
                <tr>
                    <td>سایر قابلیت‌های دوربین</td>
                    <td>HDR, panorama</td>
                    <td>HDR (photo/panorama)</td>
                </tr>
                <tr>
                    <td>فیلم برداری</td>
                    <td>4K@60fps, 1080p@60/240fps (gyro-EIS), 720p@960fps (gyro-EIS), HDR10</td>
                    <td>4K@24/30/60fps, 1080p@30/60/120/240fps, 10‑bit HDR, Dolby Vision HDR (up to 60fps), stereo sound rec</td>
                </tr>
                <tr>
                    <td>سایر قابلیت‌های دوربین</td>
                    <td>HDR<br>4K@30fps, 1080p@30fps, gyro-EIS</td>
                    <td>HDR<br>4K@24/30/60fps, 1080p@30/60/120fps, gyro-EIS</td>
                </tr>
                <tr>
                    <th>صدا</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>بلندگو</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>ورودی جک 3.5 میلیمتری صدا</td>
                    <td><i class="far fa-times"></i></td>
                    <td>------</td>
                </tr>
                <tr>
                    <th>امکانات نرم افزاری</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>سیستم عامل</td>
                    <td>Android</td>
                    <td>ios</td>
                </tr>
                <tr>
                    <td>نسخه سیستم عامل</td>
                    <td>Android 10</td>
                    <td>iOS 14.1</td>
                </tr>
                <tr>
                    <td>پشتیبانی از زبان فارسی</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>قابلیت‌های نرم‌افزاری</td>
                    <td>MMS , ایمیل , برنامه ویرایش عکس , سرویس‌های گوگل شامل Google Search, Google Maps, Gmail و YouTube , قابلیت استفاده از سرویس شبکه‌های اجتماعی , قابلیت نمایش اسناد مایکروسافت آفیس , قابلیت نمایش فایل‌های متنی PDF , مرورگر HTML5</td>
                    <td>MMS , ایمیل , برنامه ویرایش عکس , سرویس‌های گوگل شامل Google Search, Google Maps, Gmail و YouTube , قابلیت استفاده از سرویس شبکه‌های اجتماعی , قابلیت نمایش اسناد مایکروسافت آفیس , قابلیت نمایش فایل‌های متنی PDF , مرورگر HTML5</td>
                </tr>
                <tr>
                    <td>منوی فارسی</td>
                    <td><i class="far fa-check"></i></td>
                    <td>------</td>
                </tr>
                <tr>
                    <td>دفترچه تلفن</td>
                    <td>با امکان افزودن مخاطب به تعداد بی‌نهایت</td>
                    <td>------</td>
                </tr>
                <tr>
                    <td>ضبط صدا</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <th>حسگر ها</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>حسگر قطب‌نما (Compass)</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>حسگر مجاورت (Proximity)</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>حسگر تشخیص اثرانگشت (FingerPrint)</td>
                    <td><i class="far fa-check"></i></td>
                    <td>------</td>
                </tr>
                <tr>
                    <td>حسگر فشار سنج (Barometer)</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>حسگر ژیروسکوپ (Gyroscope)</td>
                    <td><i class="far fa-check"></i></td>
                    <td><i class="far fa-check"></i></td>
                </tr>
                <tr>
                    <td>سایر حسگرها</td>
                    <td>+ANT<br>Bixby<br>Samsung DeX</td>
                    <td>Face ID</td>
                </tr>
                <tr>
                    <th>باتری</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>باتری قابل تعویض توسط کاربر</td>
                    <td><i class="far fa-times"></i></td>
                    <td><i class="far fa-times"></i></td>
                </tr>
                <tr>
                    <td>امکان شارژ سریع</td>
                    <td>شارژ سریع 25 واتی</td>
                    <td>شارژ سریع 20 واتی</td>
                </tr>
                <tr>
                    <td>امکان شارژ به صورت بی سیم</td>
                    <td>شارژ سریع بی سیم 11 واتی<br>معکوس شارژ بی سیم 9 واتی</td>
                    <td>Qi</td>
                </tr>
                <tr>
                    <td>نوع باتری</td>
                    <td>لیتیوم پلیمر</td>
                    <td>لیتیوم یون</td>
                </tr>
                <tr>
                    <td>ظرفیت باتری</td>
                    <td>4500 میلی آمپر بر ساعت</td>
                    <td>3687 میلی آمپر در ساعت</td>
                </tr>
            </table>
        </div>
    </div>

    {% block footer %}
    {% include "base/footer.html" %}
    {% endblock %}
    
{% block foot %}
{% include "base/foot.html" %}
{% endblock %}

<script>
    var compareItemsIDs = [];
    $("#brand-select").on('change', function () {
        var brandTitle = $("#brand-select option:selected").text();
        if ($("#brand-select option:selected").val() != 0)
        {
            $.ajax (
                {
                    method: 'POST',
                    url: '{% url "market:findMobileByBrand" %}',
                    data: {
                        brand: brandTitle,
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        action: 'post'
                    },
                    success: function(json) {
                        if (json.status)
                        {
                            $('#mobile-select').empty().append("<option value='0'>موبایل را انتخاب کنید...</option>")
                            for (var obj of json.thisBrandMobiles) {
                                jQuery.each( obj, function( i, val ) {
                                    $("#mobile-select").append(`<option value="${i}"> 
                                        ${val} 
                                        </option>`); 
                                    }
                                );
                            }
                        }
                        else
                        {
                            console.log(json.error)
                        }
                    },
                    error: function (json) {
                        console.log(json.error)
                    }
                }
            )
        }
    })

    $("#add-compare-item-btn").click(function (){
        var mobileID = $("#mobile-select option:selected").val();
        if (mobileID != 0)
        {
            $.ajax (
                {
                    method: 'POST',
                    url: '{% url "market:addToCompare" %}',
                    data: {
                        mobileID: mobileID,
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        action: 'post'
                    },
                    success: function (json) {
                        console.log(json.status)
                        if (json.status)
                        {
                            $(".deactive").first().remove()
                            $(".selected-items").prepend('' +
                                '<div val="' + json.id + '" class="col-6 active">' +
                                    '<div class="row">' +
                                        '<div class="col-12">' +
                                            '<div class="compare-item-image">' +
                                                '<a href="http://localhost:8000/products/mobile/' + json.slug + '">' +
                                                    '<img src="' + json.image + '" alt="عکس محصول">' +
                                                '</a>' +
                                                '<i val="' + json.id + '" class="far fa-times remove-compare-item" title="حذف"></i>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="row">' +
                                        '<div class="col-12">' +
                                            '<div class="compare-item-title">' +
                                                '<a href="http://localhost:8000/products/mobile/' + json.slug + '">' +
                                                    '' + json.title +
                                                '</a>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>'
                            )
                            compareItemsIDs.push(json.id)
                            if (compareItemsIDs.length > 1)
                            {
                                $("#add-compare-item-btn").prop('disabled', true)
                                $("#do-compare").prop('disabled', false)
                            }

                        }
                        else
                        {
                            console.log(json.error)
                        }
                    },
                    error: function (json) {
                        console.log(json.error)
                    }
                }
            )
        }
    })

    $(document).on('click', ".remove-compare-item", function () {
        var compareItemID = $(this).attr('val');

        $("div.active[val='" + compareItemID + "'").remove();
        $(".selected-items").append('' +
            '<div class="col-6 deactive">' +
                '<div class="row">' +
                    '<div class="col-12">' +
                        '<div class="compare-item-image">' +
                            '<img src="{% static "images/samsung-galaxy-note20-256gb.jpg" %}" alt="عکس محصول">' +
                        '</div>' +
                    '</div>' +
                '</div>' +
            '</div>')
            for( var i = 0; i < compareItemsIDs.length; i++){ 
                if ( compareItemsIDs[i] == compareItemID) { 
                    compareItemsIDs.splice(i, 1); 
                }
            }
            if ( compareItemsIDs.length < 2)
            {
                $("#add-compare-item-btn").prop('disabled', false)
                $("#do-compare").prop('disabled', true)
            }
            console.log(compareItemsIDs)
    })

    $("#do-compare").click(function () {
        if (compareItemsIDs.length == 2)
        {
            $(".add-compare-item-section").remove();

            $.ajax (
                {
                    method: 'POST',
                    url: '{% url "market:doCompare" %}',
                    data: {
                        mobileid1: compareItemsIDs[0],
                        mobileid2: compareItemsIDs[1],
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        action: 'post'
                    },
                    success: function (json) {
                        
                        if (json.inventory1 == 0)
                        {
                            price1 = 'ناموجود'
                        }
                        else {
                            price1 = json.price1
                        }
                        if (json.inventory2 == 0)
                        {
                            price2 = 'ناموجود'
                        }
                        else {
                            price2 = json.price2
                        }
                        
                        tableContent = '' +
                        '<tr>' +
                            '<td>عکس محصول</td>' +
                            '<td><a href="http://localhost:8000/products/mobile/' + json.slug1 + '"><img src="' + json.image1 + '" alt="عکس محصول"></a></td>' +
                            '<td><a href="http://localhost:8000/products/mobile/' + json.slug2 + '"><img src="' + json.image2 + '" alt="عکس محصول"></a></td>' +
                        '</tr>' +
                        '<tr>' +
                            '<th>نام</th>' +
                            '<th></th>' +
                            '<th></th>' +
                        '</tr>' +
                        '<tr>' +
                            '<td></td>' +
                            '<td><a href="http://localhost:8000/products/mobile/' + json.slug1 + '">' + json.title1 + '</a></td>' +
                            '<td><a href="http://localhost:8000/products/mobile/' + json.slug2 + '">' + json.title2 + '</a></td>' +
                        '</tr>' +
                        '<tr>' +
                            '<th>قیمت</th>' +
                            '<th></th>' +
                            '<th></th>' +
                        '</tr>' +
                        '<tr>' +
                            '<td></td>' +
                            '<td><span class="split-number">' + price1 + '</span>تومان</td>' +
                            '<td><span class="split-number">' + price2 + '</span>تومان</td>' +
                        '</tr>'


                        for (var item of json.compareList) {
                            jQuery.each(item, function(key, value){
                                tableContent += "<tr>" +
                                        "<th>" + key + "</th>" +
                                        "<th></th>" +
                                        "<th></th>" +
                                    "</tr>"
                                for (var k of value) {
                                    jQuery.each(k, function(x, y) {
                                        tableContent += "<tr>" +
                                            "<td>" + x + "</td>"
                                        for (var val of y) {
                                            if (val == '1')
                                            {
                                                val = '<i class="far fa-check"></i>'
                                            }
                                            else if (val == '0')
                                            {
                                                val = '<i class="far fa-times"></i>'
                                            }
                                            tableContent += "<td>" + val +" </td>"
                                        }
                                        tableContent += "</tr>"
                                    })
                                }
                            })
                        }

                        $("#compare-content").html(tableContent)
                        $(".split-number").digits();
                        
                    },
                    error: function (json) {

                    }
                }
            )


            $(".compare-items-card").show();

        }
    })
    
</script>